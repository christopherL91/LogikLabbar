\documentclass[a4paper,11pt]{article}
\usepackage[T1]{fontenc}
\usepackage[toc,page]{appendix}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{listings}
\usepackage{verbatim}
\usepackage{multicol}
\usepackage{csquotes}
\usepackage{fancyhdr}
\usepackage{longtable}
\usepackage{color}
\usepackage{amsmath}
\usepackage{natded}
\usepackage{graphicx}
\usepackage{bbm}
\usepackage{amssymb}
\usepackage{wrapfig}
% include code listing options
\include{code}

\title{Labb 1 \\ Logic for computer science}
\author{
  {\bf Christopher Lillthors}\\
  \textbf{911005-3817} \\\\
  {\bf Viktor Kronvall}\\
  \textbf{920225-5478}\\
  \\
  Kurskod: DD1350\\
  %Ev gruppnummer\\
  KTH -- HT14\\
  lillt@kth.se\\
  vkr@kth.se
}

\pagestyle{fancy}
\setlength{\headheight}{54pt}
\fancyfoot[C,R]{\thepage}
\fancyfoot[C]{}
\rhead{\textbf{Labb 1 -- Lillthors \& Kronvall} \\ \date{\today} \\ \ \\}
\lhead{\textbf{Royal Institute of Technology} \\ School of Computer science and communication \\ Civilingenj√∂rsprogrammet Datateknik}
\setlength{\parindent}{0in}
\setlength{\parskip}{0.1in}
\date{\today}
\begin{document}
\maketitle
\thispagestyle{empty}
\begin{abstract}
Hello world
\end{abstract}
\renewcommand{\arraystretch}{1.2}
\newpage
\thispagestyle{empty}
\tableofcontents
\newpage
\clearpage
\setcounter{page}{1}
\section{Proofs}

A simple valid proof.
\[
\Jproof{
	\cablk{
		\proofline{p \land (q \lor r)}{premise}
		\proofline{p}{$\land e_1 \: 1$}
		\proofline{q \lor r}{$\land e_2 \: 1$}
		\cablk{
			\proofline{q}{assumption}
			\proofline{p \land q}{$\land i \: 2,4$}
			\proofline{(p \land q)\lor (p \land r)}{$\lor i_{1} \: 5$}
		}
		\cablk{
			\proofline{r}{assumption}
			\proofline{p \land r}{$\land i \: 2,7$}
			\proofline{(p \land q)\lor (p \land r)}{$\lor i_{2} \: 8$}
		}
		\proofline{(p \land q)\lor (p \land r)}{$\lor e \: 3,4-6,7-9$}
	}
}
\]


A simple invalid proof.
\[
\Jproof{
	\cablk{
		\proofline{p \land (q \lor r)}{premise}
		\proofline{p}{$\land e_1 \: 1$}
		\proofline{q \lor r}{$\land e_2 \: 1$}
		\cablk{
			\proofline{q}{assumption}
			\proofline{r}{assumption}
			\proofline{p \land q}{$\land i \: 2,4$}
			\proofline{p \land r}{$\land i \: 2,5$}
			\proofline{(p \land q) \land (p \land r)}{$\land i_1 \: 6,7$}
		}
		\proofline{q \to (p \land q) \land (p \land r)}{$\to i \: 4-8$}
	}
}
\]


\section{Rules}
Table of rules
\begin{center}
    \begin{longtable}{ l p{10cm}}
    \hline
    \textbf{Rule} & \textbf{True When}\\ \hline
    premise & always \\ \hline
    assumption & start of a sub proof \\ \hline
    row $x$ & x is lesser than current row \\ \hline
    copy $x$ & row x exists \\ \hline
    $\land i \; x,y$ & rows x and y exists and contains the left and right operands respectively \\ \hline
    $\land e_1 \; x$ & row x exists and contains a statement containing $\land$ with the result preceeding the operator \\ \hline
	$\land e_2 \; x$ & row x exists and contains a statement containing $\land$ with the result succeeding the operator \\ \hline
	$\lor i_1 \; x$ & row x exists and contains the left operand of the resulting $\lor$ operation. \\ \hline
	$\lor i_2 \; x$ & row x exists and contains the right operand of the resulting $\lor$ operation. \\ \hline
	$\lor e \; x,y-u,v-w$ & all rows exists and $y \leq u$ and $v \leq w$ and rows u and w both containing the result \\ \hline
	$\to i \; x-y$ & $x \leq y$ row x contains an assumption with the left operand and row y the right operand \\ \hline
	$\to e \; x,y$ & row y contains an implication and row x contains that implication's left operand and the result is the right operand \\ \hline
	$\neg i \; x-y$ & $x \leq y$ and row x contains an assumption and row y contains a contradiction \\ \hline
	$\neg e \; x,y$ & row y contains the negation of row x and the result is a contradiction \\ \hline
	$\bot e \; x$ & row x contains a contradiction \\ \hline
	$\neg \neg i \; x$ & the result contains the double negation of row x \\ \hline
	$\neg \neg e \; x$ & row x contains the double negation of the result \\ \hline
	MT $x,y$ & row x contains $a \to b$ and row y $\neg b$ and the result is $\neg a$ \\ \hline
	PBC $x-y$ & $x \leq y$ and row x contains an assumption for $\neg a$ and row y contains a contradiction and the result is a \\ \hline
	LEM & the result is $a \lor \neg a$ \\ \hline
    \end{longtable}
\end{center}
For all ranges $x-y$ in the above table both row x and row y are inside a sub proof (box).

\section{Algorithm}
The first step of the proof checking is to start at either the first or the last row. In this example we will only choose the first row.

For that row we ensure that the given rule is valid by checking that no index refers to a row that is below the current row and if we have a rule that refers to a sub proof, we ensure that it only checks the first and last rows of the range referring to that sub proof.

For every rule we apply the definition and confirm that it holds considering the result on the current row and all referred rows specified by indices. We then proceed to the following row and apply the same rule validation for that row until we reach the end of the proof.

For all the following rows we apply the same rule validation as above.
\section{Implementation}
Show parts of Prolog implementation
\section{Results}
All given tests pass including our own.
\section{Discussion}
Note that while all given tests pass but there are some cases where the implementation still might fail.
\section{Conclusion}
We have implemented a method for testing if natural deduction is possible for a given proof and the validity of the proof.
\newpage
\begin{appendices}
\section{Source code}
\lstinputlisting{labb1.pl}
\end{appendices}
\end{document}